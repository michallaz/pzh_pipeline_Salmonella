1. uzywamy golego ubuntu 20
docker run --gpus all -it --name etoki_ubuntu20 --restart=always -v /home/michall/kraken2:/kraken2 nvidia/cuda:11.2.2-cudnn8-runtime-ubuntu20.04
3. sciagamy etoki z git-a i instalujemy python3, pip-a i inne wymagania
apt update 
apt install python3 python3-pip default-jre curl unzip wget vim  htop git -y
pip install ete3 numba numpy pandas sklearn psutil
3a Tworzymy linka symbolicznego w bin
ln -s python3 python
3b 2. instalujemy usearch
wget https://www.drive5.com/downloads/usearch11.0.667_i86linux32.gz
gunzip usearch11.0.667_i86linux32.gz
i zmieniamy jego uprawnienia chmod a_x usearch11.0.667_i86linux32
potem wystarczy zrobic gunzipa
3c
git clone https://github.com/zheminzhou/EToKi.git
3d poprawimay blad w pliku modules/configure.py przy sciaganiu pilon-a
subprocess.Popen('curl -Lo pilon-1.23.jar {0}'.format(url).split(), stderr=subprocess.PIPE).communicate()

4.dobra przed instalacja nalezy skopiowac plik wykonawczy usearch do executables ... 
python EToKi.py configure --install --usearch /usearch/usearch11.0.667_i86linux32 --link_krakenDB /kraken2/kraken2_db/kraken2_sdb/
5. instalka nie za bardzo instaluje wszystkie softy, ale to nie problem pewnie
6. test na e.coli z tej bazy pokazuje ze sequencing type to po prostu blastn na sekwencje referencyjne .... c

7a zrobilem dockerfile'a po jego zbudowaniu odpalamy go
7b docker run --gpus all -it --name testowanie_etoki --restart=always -v /home/michall/kraken2/kraken2_db/kraken2_sdb/://kraken2_sdb/
 -v /home/michall/enterobase:/enterobase -v /home/michall/Salmonella:/Salmonella etoki_from_dockerfile:latest /bin/bash
7c tworze bazy na cgMLST i MLST zgodnie z opisem w dokumencie word
7f puszczamy komendy z tutoriala wordowego

8 Do dockera dodalem sciaganie bazy cgmlst, i baz z resfindera

9.30.01.2023 dodano metaphlana do kontenera, przy okazji pip check zwraca info o zlych zaleznosciach 
seqsero2 1.2.1 has requirement biopython==1.73, but you have biopython 1.80.
sistr-cmd 1.1.2 has requirement pandas<=1.0.5,>=0.22.0, but you have pandas 1.5.3.
wiec zastanawiam sie czy nie trzymac wszystkich softow w odddzielnych kontenerach ? A same bazy wsytawic na dysk twardy 
